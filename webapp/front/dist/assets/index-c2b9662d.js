import{u as l,b as i,F as g,j as e,r as f,a as V,I as C,e as A,f as T,h as k,i as M,k as b,l as w}from"./index-6d5836d0.js";import{B as N,u as S,C as L,H as I}from"./index-233f1a73.js";import{T as v,C as P,O as x,S as y,V as G,e as O,M as j,a as E,b as D,c as R,d as _,f as $,g as B}from"./voting-list-of-sites-1354389a.js";const F="/assets/voting-list-of-creatives-aa396a27.svg",H=()=>{const o=l(t=>t.app.ADsGTVP),r=l(t=>t.app.advertiserList),n=l(t=>t.app.contractAdvertiserList),d=t=>t===1?"passed":t===2?"rejected":"process";return i(g,{children:[e(v,{className:"my-8",src:F,alt:"my creative"}),e("div",{className:"flex flex-col gap-12",children:n.map((t,p)=>e(P,{id:t.id,createdAt:t.createdAt,expires:t.endAt,link:"https://example.com",image:r[p].img,status:d(r[p].status),ok:t.agreeVoteAmount,ng:t.rejectVoteAmount,maxVp:o},t.id))})]})},U="/assets/gt-b4539d83.svg",W="/assets/publisher-overview-7c397cd6.svg",q=()=>{const o=l(a=>a.app.MeGTVP),r=l(a=>a.app.rewardMeAmount),n=f.useMemo(()=>r.toLocaleString(),[r]),d=l(a=>a.app.stakingMeTokenBalance),t=f.useMemo(()=>d.toLocaleString(),[d]),p=a=>{alert(`stake: ${a}`)},h=l(a=>a.app.MeGTVP),m=l(a=>a.app.MeGTVPTime);return i(g,{children:[e(v,{className:"my-8",src:W,alt:"advertiser overview"}),i("div",{className:"flex gap-12",children:[e(x,{className:"h-48 flex-1",title:"MeGT",icon:U,children:e("p",{className:"text-48-bold text-neutral-10",children:n})}),e(x,{className:"h-48 flex-1",type:"publisher",title:"Staked MeGT",icon:y,onStake:p,maxVp:o,children:e("p",{className:"text-48-bold text-neutral-10",children:t})}),e(x,{className:"h-48 flex-1",title:"Voting Power (AD)",icon:G,children:i("div",{children:[e("p",{className:"text-48-bold text-neutral-10 inline",children:`${h}`}),e("p",{className:"text-28-semi text-neutral-40 inline",children:" / 100 VP"})]})}),e(x,{className:"h-48 flex-1",title:"VP Regen Speed",icon:O,children:i("div",{children:[e("p",{className:"text-48-bold text-neutral-10 inline",children:`${m}`}),e("p",{className:"text-28-semi text-neutral-40 inline",children:" VP / day"})]})})]})]})},z="/assets/new-site-b7987d2e.svg",J=({className:o,onClick:r,isOpen:n,onClose:d,onCreate:t,children:p})=>{const[h,m]=f.useState(""),a=c=>m(c.target.value),u=c=>{m(""),d(c)};return i(g,{children:[e(N,{className:o,color:"secondary",onClick:r,children:p}),i(j,{isOpen:n,onClose:u,children:[e(E,{className:"h-14",children:e(v,{src:z,alt:"new site"})}),e(D,{children:e(R,{label:"Site URL",value:h,onChange:a,placeholder:"Please enter site URL here"})}),i(_,{children:[e(N,{color:"neutral",onClick:u,children:"CANCEL"}),e(N,{color:"secondary",onClick:c=>{t(h),u(c)},children:"CREATE"})]})]})]})},K=()=>{const o=l(s=>s.app.MeGTVP),[r,n]=f.useState(!1),d=()=>n(!0),t=()=>n(!1),p=l(s=>s.app.siteList),h=l(s=>s.app.contractSiteList),m=s=>{alert(`create: ${s}`)},a=S();V.useEffect(()=>{fetch("/api/sites").then(s=>{s.text().then(c=>a(C(Array(c))))}).catch(()=>alert("something went wrong"))},[]);const u=s=>s===1?"passed":s===2?"rejected":"process";return i(g,{children:[i("div",{className:"flex justify-between",children:[e(v,{className:"my-8",src:$,alt:"voting list of sites"}),e("div",{className:"flex items-center",children:e(J,{onClick:d,isOpen:r,onClose:t,onCreate:m,children:"NEW SITE"})})]}),e("div",{className:"flex flex-col gap-12",children:h.map((s,c)=>e(B,{id:s.id,url:p[c].url,createdAt:s.createdAt,status:u(p[c].status),expires:s.endAt,ok:s.agreeVoteAmount,ng:s.rejectVoteAmount,maxVp:o},s.id))})]})},Z=()=>{const o=l(t=>t.app.address),r=A(),n=S();return i(L,{children:[e(I,{address:o,current:"publisher",onDisconnect:()=>{r("/welcome"),n(T(!0)),n(k(!1)),n(M(!1)),n(b(!1)),n(w(""))}}),e(q,{}),i("div",{className:"flex gap-12",children:[e("div",{className:"flex-[2_1_0%]",children:e(H,{})}),e("div",{className:"flex-[3_1_0%]",children:e(K,{})})]})]})};export{Z as Publisher};
